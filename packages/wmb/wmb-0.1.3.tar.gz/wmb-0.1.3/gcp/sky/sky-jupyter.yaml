# jupyter.yaml

name: jupyter

resources:
  cloud: gcp
  instance_type: n2d-standard-32
  region: us-west1

file_mounts:
  /data:
    source: gs://ecker-rachel-analysis/
    mode: MOUNT
  /cemba:
    source: gs://ecker-hanqing-wmb-us-west1/
    mode: MOUNT
  /home/hanliu:
    source: gs://ecker-hanqing-analysis/
    mode: MOUNT

setup: |
  conda install mamba -y -n base -c conda-forge
  pip install --upgrade pip
  gsutil cp gs://ecker-hanqing-wmb-us-west1/wmb/sky/env.yaml ./
  mamba env update -f env.yaml
  rm env.yaml
  ln -s /home/hanliu ./hanliu

run: |
  cd ~/sky_workdir
  jupyter lab --port 8898