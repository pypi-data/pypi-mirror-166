"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7758],{44162:function(e,n,t){t.d(n,{HC:function(){return m},Kf:function(){return l},Nk:function(){return f},gE:function(){return h},jv:function(){return p},oh:function(){return s},qn:function(){return d},t1:function(){return b},y9:function(){return v}});var r=t(46313),o=t(23831),i=t(73942),c=t(86422),u=t(49125),a=t(90880),s=68;function d(e,n){var t=(n.theme.borders||o.Z.borders).light,r=(n.theme.monotone||o.Z.monotone).grey500,i=n||{},u=i.isSelected,a=i.theme;return u?t=(a.content||o.Z.content).active:c.tf.TRANSFORMER===e?(t=(a.accent||o.Z.accent).purple,r=(a.accent||o.Z.accent).purpleLight):c.tf.DATA_EXPORTER===e?(t=(a.accent||o.Z.accent).yellow,r=(a.accent||o.Z.accent).yellowLight):c.tf.DATA_LOADER===e?(t=(a.accent||o.Z.accent).blue,r=(a.accent||o.Z.accent).blueLight):c.tf.SCRATCHPAD===e&&(t=(a.content||o.Z.content).default,r=(a.accent||o.Z.accent).contentDefaultTransparent),{accent:t,accentLight:r}}var l=(0,r.css)([""," "," "," "," ",""],(0,a.eR)(),(function(e){return!e.selected&&!e.hasError&&"\n    border-color: ".concat(d(e.blockType,e).accentLight,";\n  ")}),(function(e){return e.selected&&!e.hasError&&"\n    border-color: ".concat(d(e.blockType,e).accent,";\n  ")}),(function(e){return!e.selected&&e.hasError&&"\n    border-color: ".concat((e.theme.accent||o.Z.accent).negativeTransparent,";\n  ")}),(function(e){return e.selected&&e.hasError&&"\n    border-color: ".concat((e.theme.borders||o.Z.borders).danger,";\n  ")})),f=r.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-s5rj34-0"})(["border-radius:","px;position:relative;"],i.n_),p=r.default.div.withConfig({displayName:"indexstyle__CodeContainerStyle",componentId:"sc-s5rj34-1"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;border-top-left-radius:","px;border-top-right-radius:","px;border-top-style:solid;border-top-width:2px;padding-bottom:","px;padding-top:","px;position:relative;"," "," .line-numbers{opacity:0;}&.selected{.line-numbers{opacity:1 !important;}}"],l,i.n_,i.n_,u.iI,u.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||o.Z.background).codeTextarea,";\n  ")}),(function(e){return!e.hasOutput&&"\n    border-bottom-left-radius: ".concat(i.n_,"px;\n    border-bottom-right-radius: ").concat(i.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")})),h=r.default.div.withConfig({displayName:"indexstyle__BlockDivider",componentId:"sc-s5rj34-2"})(["align-items:center;display:flex;height:","px;justify-content:center;position:relative;z-index:10;&:hover{.block-divider-inner{","}}"],2*u.iI,(function(e){return"\n        background-color: ".concat((e.theme.text||o.Z.text).fileBrowser,";\n      ")})),b=r.default.div.withConfig({displayName:"indexstyle__BlockDividerInner",componentId:"sc-s5rj34-3"})(["height 1px;width:100%;position:absolute;z-index:-1;"]),v=r.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-s5rj34-4"})(["margin-bottom:","px;padding-bottom:","px;padding-left:","px;",""],u.cd*u.iI,u.iI,s,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||o.Z.borders).medium,";\n  ")})),m=r.default.div.withConfig({displayName:"indexstyle__TimeTrackerStyle",componentId:"sc-s5rj34-5"})(["bottom:","px;left:","px;position:absolute;"],1*u.iI,s)},87758:function(e,n,t){t.d(n,{Z:function(){return B}});var r=t(77555),o=t(82394),i=t(12757),c=t(77837),u=t(38860),a=t.n(u),s=t(51774),d=t.n(s),l=t(46313),f=t(82684),p=t(83455),h=t(86422),b=t(67971),v=t(16634),m=t(86673),x=t(54283),g=t(19711),k=t(23831),y=t(10503),A=t(49125),C=(A.iI,[h.tf.DATA_EXPORTER]),E=t(73942),T=t(37391),D=l.default.div.withConfig({displayName:"indexstyle__GraphContainerStyle",componentId:"sc-bc2ei5-0"})(["div:only-child{","}",""],T.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")})),Z=l.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-bc2ei5-1"})(["border:2px solid transparent;border-radius:","px;min-width:fit-content;"," "," "," ",""],E.BG,(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.content||k.Z.content).active,";\n  ")}),(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),(function(e){return(e.isCancelled||e.disabled)&&"\n    opacity: 0.5;\n  "}),(function(e){return e.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "})),R=t(44162),j=t(28598);var w=function(e){var n=e.block,t=e.children,r=e.disabled,o=e.hasFailed,i=e.isCancelled,c=e.isInProgress,u=e.isQueued,a=e.isSuccessful,s=(e.onClick,e.selected),d=(0,f.useContext)(l.ThemeContext),p=n.type,h=n.uuid,E=!(c||u||o||a||i),T=a&&!(c||u),D=o&&!(c||u),w="";return E?w="No status":T?w="Successful execution":D?w="Failed execution":c?w="Currently executiing":i&&(w="Cancelled execution"),(0,j.jsx)(Z,{backgroundColor:(0,R.qn)(p,{theme:d}).accent,disabled:r,isCancelled:i,selected:s,children:(0,j.jsx)(m.Z,{p:1,children:(0,j.jsxs)(b.Z,{alignItems:"center",children:[(0,j.jsxs)(b.Z,{alignItems:"center",justifyContent:"center",style:{height:2*A.iI,width:2*A.iI},title:w,children:[c&&(0,j.jsx)(x.Z,{color:(d||k.Z).content.active,small:!0}),T&&(0,j.jsx)(y.Jr,{size:2*A.iI,success:!0}),D&&(0,j.jsx)(y.x8,{danger:!0,size:1.5*A.iI}),E&&(0,j.jsx)(v.Z,{borderSize:1,size:1*A.iI})]}),(0,j.jsx)(m.Z,{ml:1}),(0,j.jsx)(b.Z,{alignItems:"center",fullWidth:!0,justifyContent:"center",children:(0,j.jsx)(g.ZP,{inverted:C.includes(p),monospace:!0,small:!0,children:t})})]})})},h)},_=t(31866),P=t(41374),O=t(66050),I=t(24224),S=t(96510);function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F=d()((0,c.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Canvas);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),H=d()((0,c.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Node);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),M=d()((0,c.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Edge);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});d()((0,c.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.MarkerArrow);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),d()((0,c.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Port);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});var B=function(e){var n=e.blockRefs,t=e.blockStatus,o=e.editingBlock,c=e.fetchPipeline,u=e.height,a=e.heightOffset,s=void 0===a?10*A.iI:a,d=e.noStatus,v=e.pipeline,x=e.runningBlocks,k=void 0===x?[]:x,y=e.selectedBlock,C=e.setEditingBlock,E=e.setSelectedBlock,T=(0,f.useContext)(l.ThemeContext),Z=(null===o||void 0===o?void 0:o.upstreamBlocks)||{},N=Z.block,B=Z.values,G=void 0===B?[]:B,X=(0,f.useMemo)((function(){return G.length}),[G]),U=(0,f.useMemo)((function(){var e;return(null===v||void 0===v||null===(e=v.blocks)||void 0===e?void 0:e.filter((function(e){var n=e.type;return h.tf.SCRATCHPAD!==n})))||[]}),[null===v||void 0===v?void 0:v.blocks]),V=(0,f.useMemo)((function(){return(0,I.HK)(U,(function(e){return e.uuid}))}),[U]),z=((0,f.useMemo)((function(){return(0,I.HK)(G,(function(e){return e.uuid}))}),[G]),(0,f.useMemo)((function(){return(0,I.HK)(k,(function(e){return e.uuid}))}),[k])),q=(0,p.Db)(P.ZP.blocks.pipelines.useUpdate(null===v||void 0===v?void 0:v.uuid,null===N||void 0===N?void 0:N.uuid),{onSuccess:function(e){return(0,S.wD)(e,{callback:function(){C({upstreamBlocks:null}),null===c||void 0===c||c()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),K=(0,i.Z)(q,2),Q=K[0],W=K[1].isLoading,J=(0,f.useCallback)((function(e){var t=e.type,r=e.uuid;if(null===E||void 0===E||E(e),null!==n&&void 0!==n&&n.current){var o,i=n.current["".concat(t,"s/").concat(r,".py")];null===i||void 0===i||null===(o=i.current)||void 0===o||o.scrollIntoView()}}),[n,E]),Y=(0,f.useCallback)((function(e){C((function(n){var t=n.upstreamBlocks.values||[],r=t.findIndex((function(n){var t=n.uuid;return e.uuid===t}));return L(L({},n),{},{upstreamBlocks:L(L({},n.upstreamBlocks),{},{values:r>=0?(0,I.oM)(t,r):t.concat(e)})})}))}),[C]),$=(0,f.useMemo)((function(){var e={};return U.forEach((function(n){n.upstream_blocks.forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))})),e}),[U]),ee=(0,f.useMemo)((function(){var e=[],n=[];return U.forEach((function(t){var o=t.upstream_blocks,i=void 0===o?[]:o,c=t.uuid,u=$[c],a=[];u&&a.push.apply(a,(0,r.Z)(u.map((function(e){return{height:10,id:"".concat(c,"-").concat(e.uuid,"-from"),side:"SOUTH",width:10}})))),null===i||void 0===i||i.forEach((function(e){a.push({height:10,id:"".concat(e,"-").concat(c,"-to"),side:"NORTH",width:10}),n.push({from:e,fromPort:"".concat(e,"-").concat(c,"-from"),id:"".concat(e,"-").concat(c),to:c,toPort:"".concat(e,"-").concat(c,"-to")})})),e.push({data:{block:t},height:37,id:c,ports:a,width:t.uuid.length*A.KF+5*A.iI+((null===N||void 0===N?void 0:N.uuid)===t.uuid?19*A.KF:0)})})),{edges:n,nodes:e}}),[N,U]),ne=ee.edges,te=ee.nodes,re=(0,f.useCallback)((function(e){if(d)return{};if(t){var n=t[e.uuid];return{hasFailed:O.V.FAILED===n,isCancelled:O.V.CANCELLED===n,isInProgress:O.V.RUNNING===n,isQueued:O.V.INITIAL===n,isSuccessful:O.V.COMPLETED===n}}var r;return{hasFailed:h.DA.FAILED===e.status,isInProgress:z[e.uuid],isQueued:z[e.uuid]&&(null===(r=k[0])||void 0===r?void 0:r.uuid)!==e.uuid,isSuccessful:h.DA.EXECUTED===e.status}}),[z,t]);return(0,j.jsxs)(j.Fragment,{children:[N&&(0,j.jsxs)(m.Z,{my:3,px:A.cd,children:[(0,j.jsxs)(m.Z,{mb:A.cd,children:[(0,j.jsxs)(g.ZP,{children:["Select parent block(s) for ",(0,j.jsx)(g.ZP,{color:(0,R.qn)(N.type,{theme:T}).accent,inline:!0,monospace:!0,children:N.uuid}),":"]}),(0,j.jsx)(m.Z,{mt:1,children:G.map((function(e,n){var t,r=e.uuid;return(0,j.jsxs)(g.ZP,{color:(0,R.qn)(null===(t=V[r])||void 0===t?void 0:t.type,{theme:T}).accent,inline:!0,monospace:!0,children:[r,X>=2&&n<=X-2?(0,j.jsx)(g.ZP,{inline:!0,children:",\xa0"}):null]},r)}))})]}),(0,j.jsxs)(b.Z,{alignItems:"center",children:[(0,j.jsx)(_.ZP,{compact:!0,inline:!0,loading:W,onClick:function(){return Q({block:L(L({},N),{},{upstream_blocks:G.map((function(e){return e.uuid}))})})},uuid:"DependencyGraph/save_parents",children:"Save dependencies"}),(0,j.jsx)(m.Z,{ml:1}),(0,j.jsx)(_.ZP,{compact:!0,inline:!0,noBackground:!0,onClick:function(){return C({upstreamBlocks:null})},uuid:"DependencyGraph/cancel_save_parents",children:"Cancel"})]})]}),(0,j.jsx)(D,{height:u-s,children:(0,j.jsx)(F,{arrow:null,disabled:!1,edge:function(e){var n,t=V[e.source];return(0,j.jsx)(M,L(L({},e),{},{style:{stroke:null===(n=(0,R.qn)(null===t||void 0===t?void 0:t.type,{theme:T}))||void 0===n?void 0:n.accent}}))},edges:ne,fit:!0,node:function(e){return(0,j.jsx)(H,L(L({},e),{},{linkable:!1,onClick:function(e,n){var t=n.data.block;(null===N||void 0===N?void 0:N.uuid)===t.uuid||(N?Y(t):J(t))},port:null,style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(e){var n=e.node.data.block;return(0,j.jsx)("foreignObject",{height:e.height,style:{pointerEvents:"none"},width:e.width,x:0,y:0,children:(0,j.jsxs)(w,L(L({block:n,disabled:(null===N||void 0===N?void 0:N.uuid)===n.uuid,selected:N?(0,I.sE)(G,(function(e){return e.uuid===n.uuid})):(null===y||void 0===y?void 0:y.uuid)===n.uuid},re(n)),{},{children:[n.uuid,(null===N||void 0===N?void 0:N.uuid)===n.uuid&&" (currently editing)"]}),n.uuid)})}}))},nodes:te,zoomable:!0})})]})}},66050:function(e,n,t){var r;t.d(n,{V:function(){return r}}),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e.INITIAL="initial",e.RUNNING="running"}(r||(r={}))},86422:function(e,n,t){t.d(n,{$W:function(){return s},DA:function(){return a},Qj:function(){return d},Ut:function(){return f},V4:function(){return l},t6:function(){return i},tf:function(){return c}});var r,o,i,c,u=t(82394);!function(e){e.PYTHON="python",e.SQL="sql"}(i||(i={})),function(e){e.CHART="chart",e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.SCRATCHPAD="scratchpad",e.TRANSFORMER="transformer"}(c||(c={}));var a,s=[c.CHART,c.DATA_EXPORTER,c.DATA_LOADER,c.SCRATCHPAD,c.TRANSFORMER],d=[c.CHART,c.SCRATCHPAD];!function(e){e.EXECUTED="executed",e.FAILED="failed",e.NOT_EXECUTED="not_executed",e.UPDATED="updated"}(a||(a={}));var l=(r={},(0,u.Z)(r,c.DATA_EXPORTER,"Data exporter"),(0,u.Z)(r,c.DATA_LOADER,"Data loader"),(0,u.Z)(r,c.SCRATCHPAD,"Scratchpad"),(0,u.Z)(r,c.TRANSFORMER,"Transformer"),r),f=[c.DATA_LOADER,c.TRANSFORMER,c.DATA_EXPORTER];o={},(0,u.Z)(o,c.DATA_EXPORTER,"DE"),(0,u.Z)(o,c.DATA_LOADER,"DL"),(0,u.Z)(o,c.SCRATCHPAD,"SP"),(0,u.Z)(o,c.TRANSFORMER,"TF")}}]);