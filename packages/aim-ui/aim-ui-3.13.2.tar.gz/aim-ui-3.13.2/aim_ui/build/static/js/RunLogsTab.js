(this.webpackJsonpui_v2=this.webpackJsonpui_v2||[]).push([[14],{1401:function(e,n,r){},1433:function(e,n,r){"use strict";r.r(n);var t=r(7),l=r(0),a=r.n(l),i=r(69),u=r(318),c=r(17),o=r.n(c),s=r(253),d=r(566),v=r(254),f=r(11),g=r(335),L=r(18),b=r(713),h=r(15),m=r(1);function j(e){var n,r,t=e.index,l=e.style,a=e.data;return Object(m.jsx)("div",{style:l,children:Object(m.jsx)("pre",{className:"LogRow__line",children:null===(n=a.logsList)||void 0===n||null===(r=n[t-1])||void 0===r?void 0:r.value})})}j.displayName="RunLogsTab";var O,E=a.a.memo(j);!function(e){e.DEFAULT="default",e.LIVE_UPDATE="live-update",e.LOAD_MORE="load-more"}(O||(O={}));r(1401);function p(e){var n,r,l,c,j,p=e.isRunLogsLoading,I=e.runHash,R=e.runLogs,D=e.inProgress,T=e.updatedLogsCount,x=a.a.useRef(null),_=a.a.useRef(null),y=a.a.useRef({}),A=a.a.useRef({}),N=a.a.useState(O.DEFAULT),U=Object(t.a)(N,2),S=U[0],w=U[1],F=a.a.useRef(null),H=a.a.useState(0),P=Object(t.a)(H,2),M=P[0],k=P[1],V=a.a.useState(0),z=Object(t.a)(V,2),C=z[0],B=z[1],J=a.a.useRef(null),W=a.a.useRef(null),q=a.a.useState(null),G=Object(t.a)(q,2),K=G[0],Q=G[1],X=a.a.useRef(null);function Y(){if(D){var e=setInterval((function(){var e,n;w(O.LIVE_UPDATE),A.current=b.a.getRunLogs({runHash:I,record_range:J.current?"".concat(+(null===(e=F.current)||void 0===e?void 0:e[1])>5?+(null===(n=F.current)||void 0===n?void 0:n[1])-5:0,":"):"",isLiveUpdate:!0}),A.current.call()}),3e3);x.current={intervalId:e}}}return a.a.useEffect((function(){return A.current=b.a.getRunLogs({runHash:I}),A.current.call(),h.a(L.a.runDetails.tabs.logs.tabView),Y(),function(){var e;A.current.abort(),(null===(e=x.current)||void 0===e?void 0:e.intervalId)&&clearInterval(x.current.intervalId)}}),[]),a.a.useEffect((function(){var e;!D&&(null===(e=x.current)||void 0===e?void 0:e.intervalId)&&(clearInterval(x.current.intervalId),A.current.abort())}),[D]),a.a.useEffect((function(){var e=i.a.sortBy(Object.values(null!==R&&void 0!==R?R:{}),"index"),n=i.a.sortBy(e.map((function(e){return e.index}))),r=Array(3).fill("");F.current=[n[0],n[n.length-1]],Q(n),J.current=e.concat(r)}),[R]),a.a.useEffect((function(){var e,n,r,t,l;if(S===O.LOAD_MORE&&X.current)null===(r=y.current)||void 0===r||null===(t=r.scrollToItem)||void 0===t||t.call(r,(null===(l=X.current)||void 0===l?void 0:l[0])+T,"start"),w(O.DEFAULT);else if(S===O.LIVE_UPDATE&&(null===(e=X.current)||void 0===e?void 0:e[1])+T>=(null===(n=J.current)||void 0===n?void 0:n.length)-1){var a,u,c;if(!i.a.isEmpty(K))null===(a=y.current)||void 0===a||null===(u=a.scrollToItem)||void 0===u||u.call(a,null===(c=J.current)||void 0===c?void 0:c.length,"end")}else if(S===O.DEFAULT){var o,s,d;if(!i.a.isEmpty(K))null===(o=y.current)||void 0===o||null===(s=o.scrollToItem)||void 0===s||s.call(o,null===(d=J.current)||void 0===d?void 0:d.length,"end")}else{var v,f,g,L;null===(v=y.current)||void 0===v||null===(f=v.scrollToItem)||void 0===f||f.call(v,null!==(g=null===(L=X.current)||void 0===L?void 0:L[0])&&void 0!==g?g:0,"start")}}),[null===(n=J.current)||void 0===n?void 0:n.length,K]),a.a.useEffect((function(){var e,n;S===O.DEFAULT&&M&&C&&(i.a.isEmpty(K)||null===(e=y.current)||void 0===e||null===(n=e.scrollToItem)||void 0===n||n.call(e,X.current[0],"start"))}),[M,C]),Object(s.d)((function(){_.current&&(k(_.current.offsetHeight),B(_.current.offsetWidth))}),_),Object(m.jsx)(f.a,{children:Object(m.jsx)(v.a,{isLoading:p&&S===O.DEFAULT,className:"runDetailParamsTabLoader",height:"100%",children:i.a.isEmpty(R)||i.a.isEmpty(K)?Object(m.jsx)(g.a,{size:"xLarge",className:"runDetailParamsTabLoader",title:"No Logs"}):Object(m.jsx)("div",{className:"RunDetailLogsTabWrapper",children:Object(m.jsx)("div",{className:"RunDetailLogsTab",children:Object(m.jsx)("div",{className:"Logs",ref:_,children:Object(m.jsxs)("div",{className:"Logs__wrapper",children:[Object(m.jsx)(u.c,{ref:y,height:(null===(r=_.current)||void 0===r?void 0:r.offsetHeight)||100,itemCount:(null===(l=J.current)||void 0===l?void 0:l.length)+1,itemSize:function(){return 15},width:"100%",overscanCount:1e3,initialScrollOffset:null!==(c=W.current)&&void 0!==c?c:15*(null===(j=J.current)||void 0===j?void 0:j.length),onItemsRendered:function(e){X.current=[e.visibleStartIndex,e.visibleStopIndex]},itemData:{logsList:J.current},onScroll:function(e){var n,r,t,l;W.current=e.scrollOffset,e.scrollOffset<=15&&0!==+(null===K||void 0===K?void 0:K[0])&&"backward"===e.scrollDirection&&((null===(n=x.current)||void 0===n?void 0:n.intervalId)&&(clearInterval(x.current.intervalId),A.current.abort()),w(O.LOAD_MORE),A.current=b.a.getRunLogs({runHash:I,record_range:"".concat(+(null===(r=F.current)||void 0===r?void 0:r[0])>500?+(null===(t=F.current)||void 0===t?void 0:t[0])-500:0,":").concat(null===(l=F.current)||void 0===l?void 0:l[0]),isLoadMore:!0}),A.current.call(),Y())},children:E},"".concat(M).concat(C)),Object(m.jsx)("div",{className:o()("overlay",{loading:p&&S===O.LOAD_MORE}),children:Object(m.jsx)(d.a,{size:24,value:75,thickness:4,color:"primary"})})]})})})})})})}p.displayName="RunLogsTab";var I=a.a.memo(p);n.default=I}}]);
//# sourceMappingURL=RunLogsTab.js.map?version=1d8eb0ee3e4c577555fc