(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{8792:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/data",function(){return n(5369)}])},311:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var s=n(6042),i=n(9396),r=n(5893),o=n(7294),a=n(1163),c=n(9008),l=n.n(c),u=n(562),d=n(8849),p=n(3648),h=n(2971),y=n(2097),f=n(5050),m=n(6336),w=n(784),g=n(9072),k=n(5084),x=n(9630),b=n(1953);function v(e){var t=e.children,n=(0,h.Z)({disableHysteresis:!0,threshold:24});return(0,o.cloneElement)(t,{elevation:n?4:0})}var S=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],s=((0,o.useCallback)((function(){n(!t)}),[t]),(0,y.Z)());return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(v,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{color:"transparent",elevation:0,children:(0,r.jsx)(m.Z,{maxWidth:"xl",sx:{padding:0},children:(0,r.jsx)(w.Z,{sx:{minHeight:50,maxHeight:50,padding:0,flex:1,alignItems:"center",justifyContent:"space-between",display:"flex",flexWrap:"nowrap"},children:(0,r.jsx)(g.ZP,{item:!0,children:(0,r.jsx)(k.Z,{href:"https://system-bridge.timmo.dev",target:"_blank",children:(0,r.jsx)(x.Z,{component:"div",variant:"h4",sx:{textTransform:"none",userSelect:"none",color:s.palette.primary.contrastText},children:"System Bridge"})})})})})}),(0,r.jsx)(b.Z,{sx:{height:s.spacing(18)}})]})})})},j=!1;var Z=function(e){var t=(0,a.useRouter)();return(0,o.useEffect)((function(){if(t.isReady&&!j){var e,n,r,o;j=!0;var a=(null===(e=t.query)||void 0===e?void 0:e.apiKey)||"",c=(null===(n=t.query)||void 0===n?void 0:n.apiPort)||"9170",l=!1;if((null===(r=t.query)||void 0===r?void 0:r.apiKey)||(l=!0,a=window.prompt("Please enter your API key",a)),(null===(o=t.query)||void 0===o?void 0:o.apiPort)||(l=!0,c=window.prompt("Please enter your API port (default: 9170)",c)),l&&a&&c){var u=t.asPath.split("?")[0];t.replace({pathname:u.includes(".html")?u:"".concat(u,".html"),query:(0,i.Z)((0,s.Z)({},t.query),{apiKey:a,apiPort:c})})}}}),[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,r.jsx)("link",{rel:"canonical",href:e.url}),(0,r.jsx)("meta",{name:"description",content:e.description?"".concat(e.description):e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,r.jsx)("meta",{name:"keywords",content:e.keywords?"".concat(e.keywords):"system-bridge, system, bridge, typescript"})]}),!e.noHeader&&(0,r.jsx)(S,{}),e.closeButton&&(0,r.jsx)(u.Z,{size:"small",sx:{position:"absolute",top:4,right:4,zIndex:1e3},onClick:function(){window.location.href="http://close.window"},children:(0,r.jsx)(d.Icon,{id:"close",path:p.r5M,size:1})}),e.children]})}},8838:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});var s=n(7568),i=n(1438),r=n(4051),o=n.n(r),a=function(){function e(t,n,r){(0,i.Z)(this,e),this.port=t||9170,this.apiKey=n;var a=this;(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.connect();case 2:a.websocket=e.sent,r&&a.websocket&&a.websocket.readyState===a.websocket.OPEN&&r();case 4:case"end":return e.stop()}}),e)})))()}var t=e.prototype;return t.close=function(){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&this.websocket.close()},t.connect=function(){var e=this;return(0,s.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new WebSocket("ws://".concat(window.location.hostname||"localhost",":").concat(e.port,"/api/websocket")),t.next=3,new Promise((function(e){n.onopen=function(){return e()}}));case 3:return n.onmessage=function(t){if("string"===typeof t.data){var n=JSON.parse(t.data);n&&e.onEvent&&e.onEvent(n)}},t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},t.isConnected=function(){var e;return(null===(e=this.websocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN},t.getData=function(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Get data:",e),this.websocket.send(JSON.stringify({"api-key":this.apiKey,event:"GET_DATA",modules:e})))},t.getSettings=function(){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Get settings"),this.websocket.send(JSON.stringify({"api-key":this.apiKey,event:"GET_SETTINGS"})))},t.registerDataListener=function(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Register data listener:",e),this.websocket.send(JSON.stringify({"api-key":this.apiKey,event:"REGISTER_DATA_LISTENER",modules:e})))},t.sendPlayerStatus=function(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&this.websocket.send(JSON.stringify({"api-key":this.apiKey,event:"MEDIA_STATUS",status:e}))},t.updateSetting=function(e,t){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Update setting:",{key:e,value:t}),this.websocket.send(JSON.stringify({"api-key":this.apiKey,event:"UPDATE_SETTING",setting:e,value:t})))},e}()},5369:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var s=n(5893),i=n(7294),r=n(6336),o=n(7568),a=n(6042),c=n(4051),l=n.n(c),u=n(1163),d=n(2097),p=n(9072),h=n(2722),y=n(8661),f=n(754),m=n(6486),w=n(8838),g=n(5152),k=n.n(g),x=n(1359),b=n(9630),v=k()((function(){return n.e(171).then(n.t.bind(n,5171,23))}),{loadableGenerated:{webpack:function(){return[5171]}},ssr:!1});var S=function(e){var t=e.name,n=e.data;return(0,s.jsxs)(x.Z,{children:[(0,s.jsx)(b.Z,{gutterBottom:!0,variant:"h4",component:"h3",children:t}),n?(0,s.jsx)(v,{src:n,displayDataTypes:!1,displayObjectSize:!0,enableClipboard:!0,iconStyle:"triangle",name:null,collapseStringsAfterLength:140,style:{background:"initial",maxWidth:"100%"},theme:"google"}):(0,s.jsx)(p.ZP,{container:!0,direction:"row",justifyContent:"center",children:(0,s.jsx)(f.Z,{})})]})},j=["battery","cpu","disk","display","gpu","memory","network","sensors","system"],Z={battery:"Battery",cpu:"CPU",disk:"Disk",display:"Display",gpu:"GPU",memory:"Memory",network:"Network",sensors:"Sensors",system:"System"},P={battery:{},cpu:{},disk:{},memory:{},network:{},sensors:{},system:{}};var E=function(){var e=(0,i.useState)(P),t=e[0],n=e[1],r=(0,i.useState)(!1),c=r[0],g=r[1],k=(0,i.useState)(0),x=k[0],b=k[1],v=(0,u.useRouter)().query,E=(0,i.useCallback)((function(e){console.log("Event:",e),"DATA_UPDATE"===e.type&&(console.log("Data update:",e.module,e.data),n((function(t){var n=(0,m.cloneDeep)(t);return"string"==typeof e.module&&(n[e.module]=e.data),n})))}),[]),N=(0,i.useCallback)((function(e,t){console.log("Setup WebSocketConnection");var n=new w.C(e,t,(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.getData(j),n.registerDataListener(j);case 2:case"end":return e.stop()}}),e)}))));n.onEvent=E}),[E]);(0,i.useEffect)((function(){!c&&v&&v.apiKey&&(g(!0),N(Number(v.apiPort)||9170,String(v.apiKey)))}),[c,N,v]);var T=(0,d.Z)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p.ZP,{container:!0,direction:"column",spacing:2,alignItems:"stretch",sx:{padding:T.spacing(2)},children:(0,s.jsxs)(p.ZP,{container:!0,direction:"row",item:!0,xs:!0,children:[(0,s.jsx)(p.ZP,{item:!0,children:(0,s.jsx)(h.Z,{orientation:"vertical",variant:"scrollable",value:x,onChange:function(e,t){b(t)},children:j.map((function(e,t){return(0,s.jsx)(y.Z,(0,a.Z)({label:Z[e]},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t)),t)}))})}),(0,s.jsx)(p.ZP,{item:!0,xs:!0,children:j.map((function(e,n){return(0,s.jsx)(i.Fragment,{children:x===n?(0,s.jsx)(s.Fragment,{children:t[e]?(0,s.jsx)(S,{data:t[e],name:Z[e]}):(0,s.jsx)(p.ZP,{container:!0,direction:"row",justifyContent:"center",sx:{margin:T.spacing(8,0,14)},children:(0,s.jsx)(f.Z,{})})}):""},n)}))})]})})})},N=n(311);var T=function(){return(0,s.jsx)(N.Z,{title:"Data",url:"https://system-bridge.timmo.dev",description:"Frontend for System Bridge",children:(0,s.jsx)(r.Z,{component:"article",maxWidth:"xl",children:(0,s.jsx)(E,{})})})}}},function(e){e.O(0,[702,662,127,598,710,774,888,179],(function(){return t=8792,e(e.s=t);var t}));var t=e.O();_N_E=t}]);