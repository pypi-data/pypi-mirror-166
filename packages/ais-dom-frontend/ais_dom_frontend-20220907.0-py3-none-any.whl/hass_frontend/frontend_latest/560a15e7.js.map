{"version":3,"file":"560a15e7.js","mappings":";;AA0DA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AAGA;AACA;;AAEA;AACA;;;AAGA;AAGA;AACA;AACA;AACA;;;AAGA;AAGA;AACA;AACA;AACA;AACA;;;AA/DA;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BA;AAoEA;;AApEA;;;;;;ACkBA;;;;AAKA;ACXA;AAGA;;;;;;;;;;;;;;;;;;;;ACZA;;ACkDA;;AAIA;AACA;AACA;AACA;;;AAKA;AAeA;AAKA;;AAGA;;AAGA;;AAGA;AACA;;;;AAQA;;AAMA;AACA;;;;;AAOA;;AAKA;;;;;;AAQA;;AAKA;;;;;;AASA;;;;;AAgCA;AACA;;;AAGA;;;AAIA;AACA;;;;;AAMA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAzJA","sources":["webpack://home-assistant-frontend/./src/components/ha-button-related-filter-menu.ts","webpack://home-assistant-frontend/./src/components/ha-card.ts","webpack://home-assistant-frontend/./src/components/ha-fab.ts","webpack://home-assistant-frontend/./src/components/ha-state-icon.ts","webpack://home-assistant-frontend/./src/components/ha-switch.ts","webpack://home-assistant-frontend/./src/panels/aistts/ha-panel-aisttsauto.ts"],"sourcesContent":["import type { Corner } from \"@material/mwc-menu\";\nimport \"@material/mwc-menu/mwc-menu-surface\";\nimport { mdiFilterVariant } from \"@mdi/js\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\nimport { computeDeviceName } from \"../data/device_registry\";\nimport { findRelated, RelatedResult } from \"../data/search\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./device/ha-device-picker\";\nimport \"./entity/ha-entity-picker\";\nimport \"./ha-area-picker\";\nimport \"./ha-icon-button\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"related-changed\": {\n      value?: FilterValue;\n      items?: RelatedResult;\n      filter?: string;\n    };\n  }\n}\n\ninterface FilterValue {\n  area?: string;\n  device?: string;\n  entity?: string;\n}\n\n@customElement(\"ha-button-related-filter-menu\")\nexport class HaRelatedFilterButtonMenu extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public corner: Corner = \"TOP_START\";\n\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ attribute: false }) public value?: FilterValue;\n\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n\n  @state() private _open = false;\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-icon-button\n        @click=${this._handleClick}\n        .label=${this.hass.localize(\"ui.components.related-filter-menu.filter\")}\n        .path=${mdiFilterVariant}\n      ></ha-icon-button>\n      <mwc-menu-surface\n        .open=${this._open}\n        .anchor=${this}\n        .fullwidth=${this.narrow}\n        .corner=${this.corner}\n        @closed=${this._onClosed}\n        @input=${stopPropagation}\n      >\n        <ha-area-picker\n          .label=${this.hass.localize(\n            \"ui.components.related-filter-menu.filter_by_area\"\n          )}\n          .hass=${this.hass}\n          .value=${this.value?.area}\n          no-add\n          @value-changed=${this._areaPicked}\n          @click=${this._preventDefault}\n        ></ha-area-picker>\n        <ha-device-picker\n          .label=${this.hass.localize(\n            \"ui.components.related-filter-menu.filter_by_device\"\n          )}\n          .hass=${this.hass}\n          .value=${this.value?.device}\n          @value-changed=${this._devicePicked}\n          @click=${this._preventDefault}\n        ></ha-device-picker>\n        <ha-entity-picker\n          .label=${this.hass.localize(\n            \"ui.components.related-filter-menu.filter_by_entity\"\n          )}\n          .hass=${this.hass}\n          .value=${this.value?.entity}\n          .excludeDomains=${this.excludeDomains}\n          @value-changed=${this._entityPicked}\n          @click=${this._preventDefault}\n        ></ha-entity-picker>\n      </mwc-menu-surface>\n    `;\n  }\n\n  private _handleClick(): void {\n    if (this.disabled) {\n      return;\n    }\n    this._open = true;\n  }\n\n  private _onClosed(ev): void {\n    ev.stopPropagation();\n    this._open = false;\n  }\n\n  private _preventDefault(ev) {\n    ev.preventDefault();\n  }\n\n  private async _entityPicked(ev: CustomEvent) {\n    ev.stopPropagation();\n    const entityId = ev.detail.value;\n    if (!entityId) {\n      fireEvent(this, \"related-changed\", { value: undefined });\n      return;\n    }\n    const filter = this.hass.localize(\n      \"ui.components.related-filter-menu.filtered_by_entity\",\n      \"entity_name\",\n      computeStateName((ev.currentTarget as any).comboBox.selectedItem)\n    );\n    const items = await findRelated(this.hass, \"entity\", entityId);\n    fireEvent(this, \"related-changed\", {\n      value: { entity: entityId },\n      filter,\n      items,\n    });\n  }\n\n  private async _devicePicked(ev: CustomEvent) {\n    ev.stopPropagation();\n    const deviceId = ev.detail.value;\n    if (!deviceId) {\n      fireEvent(this, \"related-changed\", { value: undefined });\n      return;\n    }\n    const filter = this.hass.localize(\n      \"ui.components.related-filter-menu.filtered_by_device\",\n      \"device_name\",\n      computeDeviceName(\n        (ev.currentTarget as any).comboBox.selectedItem,\n        this.hass\n      )\n    );\n    const items = await findRelated(this.hass, \"device\", deviceId);\n\n    fireEvent(this, \"related-changed\", {\n      value: { device: deviceId },\n      filter,\n      items,\n    });\n  }\n\n  private async _areaPicked(ev: CustomEvent) {\n    ev.stopPropagation();\n    const areaId = ev.detail.value;\n    if (!areaId) {\n      fireEvent(this, \"related-changed\", { value: undefined });\n      return;\n    }\n    const filter = this.hass.localize(\n      \"ui.components.related-filter-menu.filtered_by_area\",\n      \"area_name\",\n      (ev.currentTarget as any).comboBox.selectedItem.name\n    );\n    const items = await findRelated(this.hass, \"area\", areaId);\n    fireEvent(this, \"related-changed\", {\n      value: { area: areaId },\n      filter,\n      items,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: inline-block;\n        position: relative;\n        --mdc-menu-min-width: 250px;\n      }\n      ha-area-picker,\n      ha-device-picker,\n      ha-entity-picker {\n        display: block;\n        width: 300px;\n        padding: 4px 16px;\n        box-sizing: border-box;\n      }\n      ha-area-picker {\n        padding-top: 16px;\n      }\n      ha-entity-picker {\n        padding-bottom: 16px;\n      }\n      :host([narrow]) ha-area-picker,\n      :host([narrow]) ha-device-picker,\n      :host([narrow]) ha-entity-picker {\n        width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-button-related-filter-menu\": HaRelatedFilterButtonMenu;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-card\")\nexport class HaCard extends LitElement {\n  @property() public header?: string;\n\n  @property({ type: Boolean, reflect: true }) public outlined = false;\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 4px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0px 2px 1px -1px rgba(0, 0, 0, 0.2),\n          0px 1px 1px 0px rgba(0, 0, 0, 0.14),\n          0px 1px 3px 0px rgba(0, 0, 0, 0.12)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      :host([outlined]) {\n        box-shadow: none;\n        border-width: var(--ha-card-border-width, 1px);\n        border-style: solid;\n        border-color: var(\n          --ha-card-border-color,\n          var(--divider-color, #e0e0e0)\n        );\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 48px;\n        padding: 12px 16px 16px;\n        display: block;\n        margin-block-start: 0px;\n        margin-block-end: 0px;\n        font-weight: normal;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid var(--divider-color, #e8e8e8);\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`<h1 class=\"card-header\">${this.header}</h1>`\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-card\": HaCard;\n  }\n}\n","import { FabBase } from \"@material/mwc-fab/mwc-fab-base\";\nimport { styles } from \"@material/mwc-fab/mwc-fab.css\";\nimport { customElement } from \"lit/decorators\";\nimport { css } from \"lit\";\n\n@customElement(\"ha-fab\")\nexport class HaFab extends FabBase {\n  protected firstUpdated(changedProperties) {\n    super.firstUpdated(changedProperties);\n    this.style.setProperty(\"--mdc-theme-secondary\", \"var(--primary-color)\");\n  }\n\n  static override styles = [\n    styles,\n    css`\n      :host .mdc-fab--extended .mdc-fab__icon {\n        margin-inline-start: -8px;\n        margin-inline-end: 12px;\n        direction: var(--direction);\n      }\n    `,\n    // safari workaround - must be explicit\n    document.dir === \"rtl\"\n      ? css`\n          :host .mdc-fab--extended .mdc-fab__icon {\n            direction: rtl;\n          }\n        `\n      : css``,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-fab\": HaFab;\n  }\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport { html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { stateIconPath } from \"../common/entity/state_icon_path\";\nimport \"./ha-icon\";\nimport \"./ha-svg-icon\";\n\n@customElement(\"ha-state-icon\")\nexport class HaStateIcon extends LitElement {\n  @property({ attribute: false }) public state?: HassEntity;\n\n  @property() public icon?: string;\n\n  protected render(): TemplateResult {\n    if (this.icon || this.state?.attributes.icon) {\n      return html`<ha-icon\n        .icon=${this.icon || this.state?.attributes.icon}\n      ></ha-icon>`;\n    }\n    return html`<ha-svg-icon .path=${stateIconPath(this.state)}></ha-svg-icon>`;\n  }\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-state-icon\": HaStateIcon;\n  }\n}\n","import { SwitchBase } from \"@material/mwc-switch/deprecated/mwc-switch-base\";\nimport { styles } from \"@material/mwc-switch/deprecated/mwc-switch.css\";\nimport { css } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { forwardHaptic } from \"../data/haptics\";\n\n@customElement(\"ha-switch\")\nexport class HaSwitch extends SwitchBase {\n  // Generate a haptic vibration.\n  // Only set to true if the new value of the switch is applied right away when toggling.\n  // Do not add haptic when a user is required to press save.\n  @property({ type: Boolean }) public haptic = false;\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.addEventListener(\"change\", () => {\n      if (this.haptic) {\n        forwardHaptic(\"light\");\n      }\n    });\n  }\n\n  static override styles = [\n    styles,\n    css`\n      :host {\n        --mdc-theme-secondary: var(--switch-checked-color);\n      }\n      .mdc-switch.mdc-switch--checked .mdc-switch__thumb {\n        background-color: var(--switch-checked-button-color);\n        border-color: var(--switch-checked-button-color);\n      }\n      .mdc-switch.mdc-switch--checked .mdc-switch__track {\n        background-color: var(--switch-checked-track-color);\n        border-color: var(--switch-checked-track-color);\n      }\n      .mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb {\n        background-color: var(--switch-unchecked-button-color);\n        border-color: var(--switch-unchecked-button-color);\n      }\n      .mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {\n        background-color: var(--switch-unchecked-track-color);\n        border-color: var(--switch-unchecked-track-color);\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-switch\": HaSwitch;\n  }\n}\n","import \"../../components/ha-card\";\nimport \"../../components/ha-menu-button\";\nimport \"@material/mwc-icon-button\";\nimport {\n  mdiHistory,\n  mdiInformationOutline,\n  mdiPencil,\n  mdiElectricSwitch,\n} from \"@mdi/js\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\nimport { css, html, LitElement, PropertyValues, TemplateResult } from \"lit\";\nimport { property, customElement } from \"lit/decorators\";\nimport \"@polymer/polymer/lib/elements/dom-repeat\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { navigate } from \"../../common/navigate\";\nimport \"../../components/entity/ha-entity-toggle\";\nimport \"../../components/ha-fab\";\nimport \"../../components/ha-svg-icon\";\nimport \"../../components/ha-button-related-filter-menu\";\nimport { triggerAutomationActions } from \"../../data/automation\";\nimport { haStyle } from \"../../resources/styles\";\nimport { computeStateDomain } from \"../../common/entity/compute_state_domain\";\nimport { HomeAssistant } from \"../../types\";\nimport { formatDateTime } from \"../../common/datetime/format_date_time\";\nimport memoizeOne from \"memoize-one\";\nimport { HassEntityBase } from \"home-assistant-js-websocket\";\nimport { HaCheckbox } from \"../../components/ha-checkbox\";\n// eslint-disable-next-line import/no-duplicates\nimport \"../../components/data-table/ha-data-table\";\nimport {\n  DataTableColumnContainer,\n  DataTableRowData,\n  // eslint-disable-next-line import/no-duplicates\n} from \"../../components/data-table/ha-data-table\";\n\nexport interface AutomationRowData extends DataTableRowData {\n  id: string;\n  name: string | undefined;\n  last_triggered: string;\n  entity: HassEntityBase;\n}\n\n@customElement(\"ha-panel-aisttsauto\")\nclass HaPanelAisTtsAuto extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public isWide!: boolean;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  private _columns = memoizeOne(\n    (narrow: boolean, _locale): DataTableColumnContainer => {\n      const columns: DataTableColumnContainer = {\n        toggle: {\n          title: html`&nbsp;&nbsp;&nbsp;&nbsp;<ha-svg-icon\n              path=${mdiElectricSwitch}\n            ></ha-svg-icon>`,\n          type: \"icon\",\n          template: (_toggle, automation: any) =>\n            html`\n              <ha-checkbox\n                .key=${automation.id}\n                .hass=${this.hass}\n                @change=${this._handleRowCheckboxClick}\n                .checked=${automation.entity.state === \"on\"}\n              >\n              </ha-checkbox>\n            `,\n        },\n        name: {\n          title: \"Nazwa\",\n          sortable: true,\n          filterable: true,\n          direction: \"asc\",\n          grows: true,\n        },\n      };\n\n      if (!narrow) {\n        columns.last_triggered = {\n          sortable: true,\n          width: \"20%\",\n          title: this.hass.localize(\"ui.card.automation.last_triggered\"),\n          template: (last_triggered) => html`\n            ${last_triggered\n              ? formatDateTime(new Date(last_triggered), this.hass.locale)\n              : this.hass.localize(\"ui.components.relative_time.never\")}\n          `,\n        };\n        columns.trigger = {\n          title: html`\n            <mwc-button style=\"visibility: hidden\">\n              ${this.hass.localize(\"ui.card.automation.trigger\")}\n            </mwc-button>\n          `,\n          width: \"20%\",\n          template: (_info, automation: any) => html`\n            <mwc-button\n              .automation=${automation.entity}\n              @click=${(ev) => this._runActions(ev)}\n            >\n              URUCHOM\n            </mwc-button>\n          `,\n        };\n      }\n\n      if (this.hass.user!.is_admin) {\n        columns.info = {\n          title: \"\",\n          type: \"icon-button\",\n          template: (_info, automation: any) => html`\n            <mwc-icon-button\n              .automation=${automation.entity}\n              @click=${this._showInfo}\n              label=\"Info\"\n            >\n              <ha-svg-icon .path=${mdiInformationOutline}></ha-svg-icon>\n            </mwc-icon-button>\n          `,\n        };\n        columns.trace = {\n          title: \"\",\n          type: \"icon-button\",\n          template: (_info, automation: any) => html`\n            <a\n              href=\"/config/automation/trace/${automation.entity.attributes.id}\"\n            >\n              <mwc-icon-button label=\"Åšlad\">\n                <ha-svg-icon .path=${mdiHistory}></ha-svg-icon>\n              </mwc-icon-button>\n            </a>\n          `,\n        };\n        columns.edit = {\n          title: \"\",\n          type: \"icon-button\",\n          template: (_info, automation: any) => html`\n            <a\n              href=\"/config/automation/edit/${automation.entity.attributes.id}\"\n            >\n              <mwc-icon-button label=\"Edit\">\n                <ha-svg-icon path=${mdiPencil}></ha-svg-icon>\n              </mwc-icon-button>\n            </a>\n          `,\n        };\n      }\n      return columns;\n    }\n  );\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n  }\n\n  private _get_automations(_states) {\n    const l_automation: AutomationRowData[] = [];\n    Object.values(this.hass.states).forEach((entity) => {\n      if (\n        computeStateDomain(entity) === \"automation\" &&\n        !entity.entity_id.startsWith(\"automation.ais_\")\n      ) {\n        l_automation.push({\n          id: entity.entity_id,\n          name: entity.attributes.friendly_name,\n          last_triggered: entity.attributes.last_triggered,\n          entity: entity,\n        });\n      }\n    });\n    return l_automation;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-app-layout>\n        <app-header slot=\"header\" fixed>\n          <app-toolbar>\n            <ha-menu-button\n              .hass=${this.hass}\n              .narrow=${this.narrow}\n            ></ha-menu-button>\n            <div main-title>TTS Automatyczny</div>\n            ${this.hass.user!.is_admin\n              ? html`<ha-icon-button\n                  label=\"Dodaj\"\n                  icon=\"hass:plus\"\n                  @click=${this._createNew}\n                ></ha-icon-button>`\n              : html``}\n          </app-toolbar>\n        </app-header>\n        <ha-card class=\"content\">\n          <ha-data-table\n            .columns=${this._columns(this.narrow, this.hass.locale)}\n            .data=${this._get_automations(this.hass.states)}\n            auto-height\n            searchLabel=\"Szukaj\"\n            noDataText=\"Brak danych\"\n          ></ha-data-table>\n        </ha-card>\n      </ha-app-layout>\n    `;\n  }\n\n  private _showInfo(ev) {\n    ev.stopPropagation();\n    const entityId = (ev.currentTarget as any).automation.entity_id;\n    fireEvent(this, \"hass-more-info\", { entityId });\n  }\n\n  private _runActions(ev) {\n    const entityId = (ev.currentTarget as any).automation.entity_id;\n    triggerAutomationActions(this.hass, entityId);\n  }\n\n  private _createNew() {\n    navigate(\"/config/automation/edit/new\");\n  }\n\n  private _handleRowCheckboxClick(ev: Event) {\n    const key = (ev.currentTarget as any).key;\n    const hass = (ev.currentTarget as any).hass;\n    const checkbox = ev.currentTarget as HaCheckbox;\n    let mode = \"off\";\n    if (checkbox.checked) {\n      mode = \"on\";\n    }\n    hass.callService(\"ais_tts\", \"change_auto_mode\", {\n      entity_id: key,\n      change_to: mode,\n    });\n  }\n\n  static get styles() {\n    return [\n      haStyle,\n      css`\n        ha-card.content {\n          padding: 16px;\n        }\n\n        .has-header {\n          padding-top: 0;\n        }\n\n        .checked span {\n          color: var(--primary-color);\n        }\n        .content {\n          padding-bottom: 32px;\n          max-width: 94%;\n          margin: 0 auto;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-panel-aisttsauto\": HaPanelAisTtsAuto;\n  }\n}\n"],"names":[],"sourceRoot":""}