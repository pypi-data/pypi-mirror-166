{"version":3,"file":"lib_index_js.798fe1ca9813f93657e1.js","mappings":";;;;;;;;;;;;;AAAA,iEAAe,qyDAAqyD,cAAc,OAAO,cAAc,6wCAA6wC;;;;;;;;;;;;;;;;;ACAhjG;AACK;AAClD,yBAAyB,8DAAO;AACvC;AACA,YAAY,qEAAY;AACxB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLyD;AACL;AACiB;AACT;AACJ;AACK;AACb;AACK;AACS;AACd;AACS;AACJ;AACf;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,oEAAe;AACvB,QAAQ,uEAAmB;AAC3B,QAAQ,mEAAe;AACvB,QAAQ,wEAAmB;AAC3B,QAAQ,yEAAgB;AACxB,QAAQ,gEAAW;AACnB;AACA,eAAe,2DAAS,EAAE,iEAAe,EAAE,2DAAS;AACpD,cAAc,iEAAgB;AAC9B;AACA;AACA;AACA;AACA;AACA,4BAA4B,+DAAa,GAAG,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA,mCAAmC,6CAA6C;AAChF;AACA,aAAa;AACb;AACA,gBAAgB,WAAW;AAC3B;AACA;AACA,kCAAkC,qEAAoB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gCAAgC,iDAAY;AAC5C;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+DAAQ;AAC1B;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,SAAS;AACxD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,sDAAsD,iDAAY;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iEAAe,MAAM,EAAC","sources":["webpack://jupyterlab-blockly-extension/./style/icons/blockly_logo.svg","webpack://jupyterlab-blockly-extension/./lib/icons.js","webpack://jupyterlab-blockly-extension/./lib/index.js"],"sourcesContent":["export default \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<svg\\n   xmlns:dc=\\\"http://purl.org/dc/elements/1.1/\\\"\\n   xmlns:cc=\\\"http://creativecommons.org/ns#\\\"\\n   xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\"\\n   xmlns:svg=\\\"http://www.w3.org/2000/svg\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n   xmlns:sodipodi=\\\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\\\"\\n   xmlns:inkscape=\\\"http://www.inkscape.org/namespaces/inkscape\\\"\\n   id=\\\"Layer_6\\\"\\n   data-name=\\\"Layer 6\\\"\\n   viewBox=\\\"0 0 192 192\\\"\\n   version=\\\"1.1\\\"\\n   sodipodi:docname=\\\"logo-only.svg\\\"\\n   inkscape:version=\\\"0.92.2pre0 (973e216, 2017-07-25)\\\"\\n   inkscape:export-filename=\\\"/usr/local/google/home/epastern/Documents/Blockly Logos/Square/logo-only.png\\\"\\n   inkscape:export-xdpi=\\\"96\\\"\\n   inkscape:export-ydpi=\\\"96\\\">\\n  <metadata\\n     id=\\\"metadata913\\\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\\\"\\\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\\\"http://purl.org/dc/dcmitype/StillImage\\\" />\\n        <dc:title>blockly-logo</dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <sodipodi:namedview\\n     pagecolor=\\\"#ffffff\\\"\\n     bordercolor=\\\"#666666\\\"\\n     borderopacity=\\\"1\\\"\\n     objecttolerance=\\\"10\\\"\\n     gridtolerance=\\\"10\\\"\\n     guidetolerance=\\\"10\\\"\\n     inkscape:pageopacity=\\\"0\\\"\\n     inkscape:pageshadow=\\\"2\\\"\\n     inkscape:window-width=\\\"2560\\\"\\n     inkscape:window-height=\\\"1379\\\"\\n     id=\\\"namedview911\\\"\\n     showgrid=\\\"false\\\"\\n     inkscape:zoom=\\\"2\\\"\\n     inkscape:cx=\\\"239.87642\\\"\\n     inkscape:cy=\\\"59.742687\\\"\\n     inkscape:window-x=\\\"0\\\"\\n     inkscape:window-y=\\\"0\\\"\\n     inkscape:window-maximized=\\\"1\\\"\\n     inkscape:current-layer=\\\"g1013\\\" />\\n  <defs\\n     id=\\\"defs902\\\">\\n    <style\\n       id=\\\"style900\\\">.cls-1{fill:#4285f4;}.cls-2{fill:#c8d1db;}</style>\\n  </defs>\\n  <title\\n     id=\\\"title904\\\">blockly-logo</title>\\n  <g\\n     id=\\\"g1013\\\"\\n     transform=\\\"translate(23.500002,-7.9121105)\\\"\\n     inkscape:export-xdpi=\\\"96\\\"\\n     inkscape:export-ydpi=\\\"96\\\">\\n    <path\\n       id=\\\"path906\\\"\\n       d=\\\"M 20.140625,32 C 13.433598,31.994468 7.9944684,37.433598 8,44.140625 V 148.85938 C 7.99447,155.56641 13.433598,161.00553 20.140625,161 h 4.726563 c 2.330826,8.74182 10.245751,14.82585 19.292968,14.83008 C 53.201562,175.81878 61.108176,169.73621 63.4375,161 h 4.841797 15.726562 c 4.418278,0 8,-3.58172 8,-8 V 40 l -8,-8 z\\\"\\n       style=\\\"fill:#4285f4\\\"\\n       inkscape:connector-curvature=\\\"0\\\"\\n       sodipodi:nodetypes=\\\"ccccccccssccc\\\" />\\n    <path\\n       sodipodi:nodetypes=\\\"ccccccccccccccccc\\\"\\n       inkscape:connector-curvature=\\\"0\\\"\\n       id=\\\"path908\\\"\\n       d=\\\"M 80.007812,31.994141 C 79.997147,49.696887 80,67.396525 80,85.109375 L 63.369141,75.710938 C 60.971784,74.358189 58.004891,76.087168 58,78.839844 v 40.621096 c 0.0049,2.75267 2.971786,4.48165 5.369141,3.1289 L 80,113.18945 v 37.5918 2.21875 8 h 8 1.425781 36.054689 c 6.36195,-2.6e-4 11.51927,-5.15758 11.51953,-11.51953 V 43.480469 C 136.97822,37.133775 131.8272,32.000222 125.48047,32 Z\\\"\\n       style=\\\"fill:#c8d1db\\\" />\\n  </g>\\n</svg>\\n\";","import { LabIcon } from '@jupyterlab/ui-components';\nimport blockly_logo from '/style/icons/blockly_logo.svg';\nexport const blockly_icon = new LabIcon({\n    name: 'blockly:icon/logo',\n    svgstr: blockly_logo\n});\n","import { ILayoutRestorer } from '@jupyterlab/application';\nimport { jsonIcon } from '@jupyterlab/ui-components';\nimport { WidgetTracker, ICommandPalette } from '@jupyterlab/apputils';\nimport { IRenderMimeRegistry } from '@jupyterlab/rendermime';\nimport { IEditorServices } from '@jupyterlab/codeeditor';\nimport { IFileBrowserFactory } from '@jupyterlab/filebrowser';\nimport { ILauncher } from '@jupyterlab/launcher';\nimport { ITranslator } from '@jupyterlab/translation';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { IMainMenu } from '@jupyterlab/mainmenu';\nimport { BlocklyEditorFactory } from 'jupyterlab-blockly';\nimport { IBlocklyRegistry } from 'jupyterlab-blockly';\nimport { blockly_icon } from './icons';\n/**\n * The name of the factory that creates the editor widgets.\n */\nconst FACTORY = 'Blockly editor';\nconst PALETTE_CATEGORY = 'Blockly editor';\nvar CommandIDs;\n(function (CommandIDs) {\n    CommandIDs.createNew = 'blockly:create-new-blockly-file';\n})(CommandIDs || (CommandIDs = {}));\n/**\n * The id of the translation plugin.\n */\nconst PLUGIN_ID = '@jupyterlab/translation-extension:plugin';\n/**\n * Initialization data for the jupyterlab-blocky extension.\n */\nconst plugin = {\n    id: 'jupyterlab-blocky:plugin',\n    autoStart: true,\n    requires: [\n        ILayoutRestorer,\n        IRenderMimeRegistry,\n        IEditorServices,\n        IFileBrowserFactory,\n        ISettingRegistry,\n        ITranslator\n    ],\n    optional: [ILauncher, ICommandPalette, IMainMenu],\n    provides: IBlocklyRegistry,\n    activate: (app, restorer, rendermime, editorServices, browserFactory, settings, translator, launcher, palette, mainMenu) => {\n        console.log('JupyterLab extension jupyterlab-blocky is activated!');\n        // Namespace for the tracker\n        const namespace = 'jupyterlab-blocky';\n        // Creating the tracker for the document\n        const tracker = new WidgetTracker({ namespace });\n        // Handle state restoration.\n        if (restorer) {\n            // When restoring the app, if the document was open, reopen it\n            restorer.restore(tracker, {\n                command: 'docmanager:open',\n                args: widget => ({ path: widget.context.path, factory: FACTORY }),\n                name: widget => widget.context.path\n            });\n        }\n        const { commands } = app;\n        // Creating the widget factory to register it so the document manager knows about\n        // our new DocumentWidget\n        const widgetFactory = new BlocklyEditorFactory({\n            name: FACTORY,\n            modelName: 'text',\n            fileTypes: ['blockly'],\n            defaultFor: ['blockly'],\n            // Kernel options, in this case we need to execute the code generated\n            // in the blockly editor. The best way would be to use kernels, for\n            // that reason, we tell the widget factory to start a kernel session\n            // when opening the editor, and close the session when closing the editor.\n            canStartKernel: true,\n            preferKernel: true,\n            shutdownOnClose: true,\n            // The rendermime instance, necessary to render the outputs\n            // after a code execution. And the mimeType service to get the\n            // mimeType from the kernel language\n            rendermime: rendermime,\n            mimetypeService: editorServices.mimeTypeService,\n            // The translator instance, used for the internalization of the plugin.\n            translator: translator\n        });\n        // Add the widget to the tracker when it's created\n        widgetFactory.widgetCreated.connect((sender, widget) => {\n            // Adding the Blockly icon for the widget so it appears next to the file name.\n            widget.title.icon = blockly_icon;\n            // Notify the instance tracker if restore data needs to update.\n            widget.context.pathChanged.connect(() => {\n                tracker.save(widget);\n            });\n            tracker.add(widget);\n        });\n        // Registering the file type\n        app.docRegistry.addFileType({\n            name: 'blockly',\n            displayName: 'Blockly',\n            contentType: 'file',\n            fileFormat: 'json',\n            extensions: ['.jpblockly'],\n            mimeTypes: ['application/json'],\n            icon: jsonIcon,\n            iconLabel: 'JupyterLab-Blockly'\n        });\n        // Registering the widget factory\n        app.docRegistry.addWidgetFactory(widgetFactory);\n        function getSetting(setting) {\n            // Read the settings and convert to the correct type\n            const currentLocale = setting.get('locale').composite;\n            return currentLocale;\n        }\n        // Wait for the application to be restored and\n        // for the settings for this plugin to be loaded\n        settings.load(PLUGIN_ID).then(setting => {\n            // Read the settings\n            const currentLocale = getSetting(setting);\n            // Listen for our plugin setting changes using Signal\n            setting.changed.connect(getSetting);\n            // Get new language and call the function that modifies the language name accordingly.\n            // Also, make the transformation to have the name of the language package as in Blockly.\n            const language = currentLocale[currentLocale.length - 2].toUpperCase() +\n                currentLocale[currentLocale.length - 1].toLowerCase();\n            console.log(`Current Language : '${language}'`);\n            // Transmitting the current language to the manager.\n            widgetFactory.registry.setlanguage(language);\n        });\n        commands.addCommand(CommandIDs.createNew, {\n            label: args => args['isPalette'] ? 'New Blockly Editor' : 'Blockly Editor',\n            caption: 'Create a new Blockly Editor',\n            icon: args => (args['isPalette'] ? null : blockly_icon),\n            execute: async (args) => {\n                // Get the directory in which the Blockly file must be created;\n                // otherwise take the current filebrowser directory\n                const cwd = args['cwd'] || browserFactory.tracker.currentWidget.model.path;\n                // Create a new untitled Blockly file\n                const model = await commands.execute('docmanager:new-untitled', {\n                    path: cwd,\n                    type: 'file',\n                    ext: '.jpblockly'\n                });\n                // Open the newly created file with the 'Editor'\n                return commands.execute('docmanager:open', {\n                    path: model.path,\n                    factory: FACTORY\n                });\n            }\n        });\n        // Add the command to the launcher\n        if (launcher) {\n            launcher.add({\n                command: CommandIDs.createNew,\n                category: 'Other',\n                rank: 1\n            });\n        }\n        // Add the command to the palette\n        if (palette) {\n            palette.addItem({\n                command: CommandIDs.createNew,\n                args: { isPalette: true },\n                category: PALETTE_CATEGORY\n            });\n        }\n        // Add the command to the main menu\n        if (mainMenu) {\n            mainMenu.kernelMenu.kernelUsers.add({\n                tracker,\n                interruptKernel: current => {\n                    var _a;\n                    const kernel = (_a = current.context.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel;\n                    if (kernel) {\n                        return kernel.interrupt();\n                    }\n                    return Promise.resolve(void 0);\n                },\n                reconnectToKernel: current => {\n                    var _a;\n                    const kernel = (_a = current.context.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel;\n                    if (kernel) {\n                        return kernel.reconnect();\n                    }\n                    return Promise.resolve(void 0);\n                },\n                restartKernel: current => {\n                    var _a;\n                    const kernel = (_a = current.context.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel;\n                    if (kernel) {\n                        return kernel.restart();\n                    }\n                    return Promise.resolve(void 0);\n                },\n                shutdownKernel: current => current.context.sessionContext.shutdown()\n            });\n        }\n        return widgetFactory.registry;\n    }\n};\nexport default plugin;\n"],"names":[],"sourceRoot":""}